<!DOCTYPE html>
<html lang="zh">
<head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
	<title>wabok-mmm</title>
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<link href="/static/mel.css?v=3" rel="stylesheet" type="text/css">
	<script src="/static/mel.min.js?v=2" type="text/javascript"></script>
<style>
div.auto_high {
  position: relative;
  min-height: 6rem;
  margin-bottom: 0.5em;
}
p.auto_high {
  font-size: 1em;
  white-space: pre-wrap;
  word-wrap: break-word;
  visibility: hidden;
  line-height: 0.8;
}
textarea.auto_high {
  font-size: 1em;
  position: absolute;
  top: 0;
  height: 100%;
}
</style>
<script type="text/javascript">
async function pull_art(){
  let r = await W.awax("get", "/cgi-bin/lude.cgi/memo/pull")
  W.jq("#mes")(r)
}
async function push_art(){
  let t = W.jq("#txt")
  let r = await W.awax("get", "/cgi-bin/lude.cgi/memo/push", {t: t()})
  alert(r)
}
async function pull_tm(){
  let dt = W.jq("#tmdt")
  let r = await W.awax("get", "/cgi-bin/pyde.cgi/art/tmread", {db:"shuw",dt:dt()})
  W.jq("#tes")(r)
}
async function push_tm(){
  let dt = W.jq("#tmdt")
  let t = W.jq("#txt")
  let r = await W.awax("get", "/cgi-bin/pyde.cgi/art/tmupload", {db:"shuw",dt:dt(),txt:btoa(String.fromCharCode(...new TextEncoder().encode(t())))})
  alert(r)
}
async function stock(){
  let r = await W.awax("get", "/cgi-bin/lude.cgi/memo/stock")
  W.jq("#ses")(r)
}
</script>
</head>
<body>
<h1>记忆</h1>
<div id="u_aht" class="auto_high">
  <p class="auto_high" db="el:s"></p>
  <textarea id="txt" class="auto_high" db="el:t,fn:sync"></textarea>
</div>
<select id="mm">
    <option value="memo">memo</option>
</select>
<button class="c2" onclick="pull_art()">pull</button>
<button class="c2" onclick="push_art()">push</button>
<button class="c2" onclick="pull_tm()">rdtm</button>
<button class="c2" onclick="push_tm()">wrtm</button>
<br>
<button onclick="stock()">stock</button> <input id="tmdt" type="text">
<pre id="mes"></pre>
<div id="tes"></div>
<div id="ses"></div>
</body>
<script type="text/javascript">W.ko("u_aht").sync = (v,m)=>{m.s(v)}</script>
</html>

